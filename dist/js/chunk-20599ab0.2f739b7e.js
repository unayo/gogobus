(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20599ab0"],{"5b34":function(t,e,c){"use strict";c("c578")},b0c0:function(t,e,c){var n=c("83ab"),a=c("5e77").EXISTS,i=c("e330"),s=c("9bf2").f,o=Function.prototype,r=i(o.toString),l=/^\s*function ([^ (]*)/,u=i(l.exec),b="name";n&&!a&&s(o,b,{configurable:!0,get:function(){try{return u(l,r(this))[1]}catch(t){return""}}})},c578:function(t,e,c){},d529:function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23"),a=c("e854"),i=c.n(a),s={class:"container py-5"},o=Object(n["f"])("div",{class:"d-flex flex-wrap justify-content-between mb-4"},[Object(n["f"])("h3",{class:"text-primary"},"Road Search | 路線搜尋"),Object(n["f"])("div",{class:"search-width position-relative"},[Object(n["f"])("input",{type:"text",class:"form-control text-center",placeholder:"快速搜尋","aria-label":"search stop","aria-describedby":"search-stop"}),Object(n["f"])("button",{class:"search-btn btn pe-4",type:"button",id:"search-stop"},[Object(n["f"])("img",{class:"search-icon",src:i.a,alt:"search icon"})])])],-1),r={class:"row"},l={class:"col-12 col-md-4"},u={class:"going-box shadow-sm bg-white rounded-1 p-4 mb-4"},b=Object(n["f"])("h5",{class:"my-3"},"Where are you going?",-1),d=Object(n["f"])("option",{selected:""},"選擇 縣市",-1),h=["value"],p=Object(n["f"])("svg",{width:"100%",height:"2px",class:"my-4"},[Object(n["f"])("line",{x1:"0",y1:"0",x2:"100%",y2:"0","stroke-width":"3","stroke-dasharray":"14 6",style:{stroke:"#B6B6B6"}})],-1),f=Object(n["f"])("option",{selected:"",value:""},"選擇 路線",-1),O=["value"],j={class:"text-center"},m={class:"bg-white rounded-1 shadow-sm"},y={class:"list-btn list-group flex-row"},g={class:"m-0"},v={class:"m-0"},D={class:"distance-menu"},w={class:"table table-striped table-hover"},C={key:0,class:"px-4 py-3"},T={key:0,class:"px-4 py-3"},x=Object(n["f"])("div",{class:"col-12 col-md-8"},null,-1);function S(t,e,c,a,i,S){return Object(n["r"])(),Object(n["e"])("div",s,[o,Object(n["f"])("div",r,[Object(n["f"])("div",l,[Object(n["f"])("div",u,[b,Object(n["D"])(Object(n["f"])("select",{onChange:e[0]||(e[0]=function(){return S.getCityBus&&S.getCityBus.apply(S,arguments)}),"onUpdate:modelValue":e[1]||(e[1]=function(t){return i.selectCity=t}),class:"form-select","aria-label":"Select city"},[d,(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["v"])(i.city,(function(t){return Object(n["r"])(),Object(n["e"])("option",{key:t.en,value:t.en},Object(n["y"])(t.name),9,h)})),128))],544),[[n["A"],i.selectCity]]),p,Object(n["D"])(Object(n["f"])("select",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return i.selectRoad=t}),class:"form-select","aria-label":"Select road"},[f,(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["v"])(i.road,(function(t,e){return Object(n["r"])(),Object(n["e"])("option",{key:e,value:t}," [ "+Object(n["y"])(t.RouteName.Zh_tw)+" ] "+Object(n["y"])(t.DepartureStopNameZh)+" - "+Object(n["y"])(t.DestinationStopNameZh),9,O)})),128))],512),[[n["A"],i.selectRoad]]),Object(n["f"])("div",j,[Object(n["f"])("button",{onClick:e[3]||(e[3]=function(t){return S.getEstimated()}),class:"searchBtn my-4 btn btn-primary",type:"button"}," 搜尋 ")])]),Object(n["f"])("div",m,[Object(n["f"])("ul",y,[Object(n["f"])("li",{onClick:e[4]||(e[4]=function(t){return i.isDirection=!0}),class:"list-group-item list-group-item-action border-0 text-center"},[Object(n["f"])("h5",g,"去程 "+Object(n["y"])(i.destinationTitle),1)]),Object(n["f"])("li",{onClick:e[5]||(e[5]=function(t){return i.isDirection=!1}),class:"list-group-item list-group-item-action border-0 text-center"},[Object(n["f"])("h5",v,"返程 "+Object(n["y"])(i.departureTitle),1)])]),Object(n["f"])("div",D,[Object(n["f"])("table",w,[Object(n["f"])("tbody",null,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["v"])(i.busDestination,(function(t){return Object(n["r"])(),Object(n["e"])("tr",{key:t.StopUID},[!0===i.isDirection?(Object(n["r"])(),Object(n["e"])("td",C,[Object(n["f"])("p",null,Object(n["y"])(t.StopName.Zh_tw)+" : "+Object(n["y"])(t.Direction),1)])):Object(n["d"])("",!0)])})),128)),(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["v"])(i.busDeparture,(function(t){return Object(n["r"])(),Object(n["e"])("tr",{key:t.StopUID},[!1===i.isDirection?(Object(n["r"])(),Object(n["e"])("td",T,[Object(n["f"])("p",null,Object(n["y"])(t.StopName.Zh_tw)+" : "+Object(n["y"])(t.Direction),1)])):Object(n["d"])("",!0)])})),128))])])])])]),x])])}c("99af"),c("d3b7"),c("159b");var k=c("6c2d"),N={data:function(){return{selectCity:"Taichung",road:[],selectRoad:[],destinationTitle:"",departureTitle:"",busDestination:[],busDeparture:[],isDirection:!0,city:[{name:"臺中市",en:"Taichung"},{name:"新竹市",en:"Hsinchu"},{name:"苗栗縣",en:"MiaoliCounty"},{name:"新北市",en:"NewTaipei"},{name:"屏東縣",en:"PingtungCounty"},{name:"金門縣",en:"KinmenCounty"},{name:"桃園市",en:"Taoyuan"},{name:"臺北市",en:"Taipei"},{name:"高雄市",en:"Kaohsiung"},{name:"臺南市",en:"Tainan"},{name:"嘉義市",en:"Chiayi"}]}},methods:{apiID:function(){var t="d270b525f2114a95895b7670090cb92c",e="Pwts_rFo3XHtvuvjDziNlG6fqvM",c=(new Date).toGMTString(),n=new k["a"]("SHA-1","TEXT");n.setHMACKey(e,"TEXT"),n.update("x-date: "+c);var a=n.getHMAC("B64"),i='hmac username="'.concat(t,'", algorithm="hmac-sha1", headers="x-date", signature="').concat(a,'"');return{Authorization:i,"X-Date":c}},getCityBus:function(){var t=this,e="https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/".concat(this.selectCity,"?$format=JSON");this.$http.get(e,{headers:this.apiID()}).then((function(e){console.log("ok 指定縣市的公車",e.data),t.road=e.data,t.selectRoad=""})).catch((function(t){console.log("error 指定縣市的公車",t.response)}))},getEstimated:function(){var t=this;this.destinationTitle=this.selectRoad.DestinationStopNameZh,this.departureTitle=this.selectRoad.DepartureStopNameZh,this.busDestination=[],this.busDeparture=[];var e="https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/".concat(this.selectCity,"/").concat(this.selectRoad.RouteName.Zh_tw,"?$format=JSON");this.$http.get(e,{headers:this.apiID()}).then((function(e){e.data.forEach((function(e){e.RouteName.Zh_tw===t.selectRoad.RouteName.Zh_tw&&(0===e.Direction?(t.busDestination.push(e),console.log("趣",t.busDestination)):1===e.Direction&&(t.busDeparture.push(e),console.log("回",t.busDeparture)))}))})).catch((function(t){console.log("error 預估到站",t.response)}))}},created:function(){this.getCityBus()}},R=(c("5b34"),c("6b0d")),B=c.n(R);const Z=B()(N,[["render",S]]);e["default"]=Z}}]);
//# sourceMappingURL=chunk-20599ab0.2f739b7e.js.map