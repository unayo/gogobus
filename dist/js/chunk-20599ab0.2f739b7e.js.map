{"version":3,"sources":["webpack:///./src/views/RoadSearch.vue?497d","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/RoadSearch.vue","webpack:///./src/views/RoadSearch.vue?5302"],"names":["DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","this","error","class","type","placeholder","aria-label","aria-describedby","id","src","alt","selected","width","height","x1","y1","x2","y2","stroke-width","stroke-dasharray","style","value","getCityBus","selectCity","city","item","en","name","selectRoad","road","index","RouteName","Zh_tw","DepartureStopNameZh","DestinationStopNameZh","getEstimated","isDirection","destinationTitle","departureTitle","busDestination","StopUID","StopName","Direction","busDeparture","data","methods","apiID","AppID","AppKey","GMTString","Date","toGMTString","ShaObj","setHMACKey","update","HMAC","getHMAC","Authorization","urlData","$http","headers","then","res","console","log","catch","response","urlEstimated","forEach","direction","push","created","__exports__","render"],"mappings":"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","file":"js/chunk-20599ab0.2f739b7e.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./RoadSearch.vue?vue&type=style&index=0&id=61d8ac62&lang=scss\"","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template>\n<div class=\"container py-5\">\n  <div class=\"d-flex flex-wrap justify-content-between mb-4\">\n    <h3 class=\"text-primary\">Road Search | 路線搜尋</h3>\n    <div class=\"search-width position-relative\">\n      <input type=\"text\" class=\"form-control text-center\" placeholder=\"快速搜尋\" aria-label=\"search stop\" aria-describedby=\"search-stop\">\n      <button class=\"search-btn btn pe-4\" type=\"button\" id=\"search-stop\">\n        <img class=\"search-icon\" src=\"../assets/images/icon-search.svg\" alt=\"search icon\">\n      </button>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-12 col-md-4\">\n      <div class=\"going-box shadow-sm bg-white rounded-1 p-4 mb-4\">\n        <h5 class=\"my-3\">Where are you going?</h5>\n        <select\n          @change=\"getCityBus\"\n          v-model=\"selectCity\"\n          class=\"form-select\" aria-label=\"Select city\">\n          <option selected>選擇 縣市</option>\n          <template v-for=\"item in city\" :key=\"item.en\">\n            <option :value=\"item.en\">{{ item.name }}</option>\n          </template>\n        </select>\n        <svg width=\"100%\" height=\"2px\" class=\"my-4\">\n          <line x1=\"0\" y1=\"0\" x2=\"100%\" y2=\"0\" stroke-width=\"3\" stroke-dasharray=\"14 6\" style=\"stroke: #B6B6B6;\"/>\n        </svg>\n        <select\n          v-model=\"selectRoad\"\n          class=\"form-select\" aria-label=\"Select road\">\n          <option selected value=\"\">選擇 路線</option>\n          <template v-for=\"(item, index) in road\" :key=\"index\">\n            <option :value=\"item\">\n              [ {{ item.RouteName.Zh_tw }} ] {{ item.DepartureStopNameZh }} - {{ item.DestinationStopNameZh }}\n              </option>\n          </template>\n        </select>\n        <div class=\"text-center\">\n          <button\n            @click=\"getEstimated()\"\n            class=\"searchBtn my-4 btn btn-primary\" type=\"button\">\n            搜尋\n          </button>\n        </div>\n      </div>\n      <div class=\"bg-white rounded-1 shadow-sm\">\n        <ul class=\"list-btn list-group flex-row\">\n          <li\n            @click=\"isDirection = true\"\n            class=\"list-group-item list-group-item-action border-0 text-center\">\n            <h5 class=\"m-0\">去程 {{ destinationTitle }}</h5>\n          </li>\n          <li\n            @click=\"isDirection = false\"\n            class=\"list-group-item list-group-item-action border-0 text-center\">\n            <h5 class=\"m-0\">返程 {{ departureTitle }}</h5>\n          </li>\n        </ul>\n        <div class=\"distance-menu\">\n          <table class=\"table table-striped table-hover\">\n            <tbody>\n              <template v-for=\"item in busDestination\" :key=\"item.StopUID\">\n                <tr>\n                  <td\n                    v-if=\"isDirection === true\"\n                    class=\"px-4 py-3\">\n                    <p>{{ item.StopName.Zh_tw }} : {{ item.Direction }}</p>\n                  </td>\n                </tr>\n              </template>\n              <template v-for=\"item in busDeparture\" :key=\"item.StopUID\">\n                <tr>\n                  <td\n                    v-if=\"isDirection === false\"\n                    class=\"px-4 py-3\">\n                    <p>{{ item.StopName.Zh_tw }}  : {{ item.Direction }}</p>\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-12 col-md-8\"></div>\n  </div>\n</div>\n</template>\n\n<style lang=\"scss\">\n  // search bar\n  body {\n    background-color: #F5F6FF;\n  }\n  .search-width {\n    width: 311px;\n  }\n  .form-control {\n    padding-right: 65px;\n  }\n  .search-btn {\n    position: absolute;\n    right: 0;\n    top: 0;\n    .search-icon {\n      filter: brightness(0.7);\n    }\n  }\n  // 分隔選單\n    .list-btn {\n    border-radius: 1rem 1rem 0 0;\n    overflow: hidden;\n  }\n  .distance-menu {\n    height: 316px;\n    overflow: scroll;\n  }\n  .list-group-item {\n    border-radius: 1rem 1rem 0 0;\n    background-color: #BFCDFF;\n    color: white;\n    width: 50%;\n    &:first-child {\n      border-radius: 1rem 0 0 0;\n    }\n    &:last-child {\n      border-radius: 0 1rem 0 0;\n    }\n  }\n  // customer\n  .going-box {\n    .searchBtn {\n      min-width: 247px;\n    }\n  }\n</style>\n\n<script>\nimport JsSHA from 'jssha'\n\nexport default {\n  data () {\n    return {\n      // 選擇縣市\n      selectCity: 'Taichung',\n      // 選擇縣市之後， getCityBus 出現所有公車路線\n      road: [],\n      // select 選擇的站點\n      selectRoad: [],\n      // 往返\n      destinationTitle: '',\n      departureTitle: '',\n      // 搜尋後，預估到站資料\n      busDestination: [],\n      busDeparture: [],\n      // 是否去程 Direction = 0\n      isDirection: true,\n      city: [\n        {\n          name: '臺中市',\n          en: 'Taichung'\n        },\n        {\n          name: '新竹市',\n          en: 'Hsinchu'\n        },\n        {\n          name: '苗栗縣',\n          en: 'MiaoliCounty'\n        },\n        {\n          name: '新北市',\n          en: 'NewTaipei'\n        },\n        {\n          name: '屏東縣',\n          en: 'PingtungCounty'\n        },\n        {\n          name: '金門縣',\n          en: 'KinmenCounty'\n        },\n        {\n          name: '桃園市',\n          en: 'Taoyuan'\n        },\n        {\n          name: '臺北市',\n          en: 'Taipei'\n        },\n        {\n          name: '高雄市',\n          en: 'Kaohsiung'\n        },\n        {\n          name: '臺南市',\n          en: 'Tainan'\n        },\n        {\n          name: '嘉義市',\n          en: 'Chiayi'\n        }\n      ]\n    }\n  },\n  methods: {\n    apiID () {\n      // API 驗證\n      const AppID = process.env.VUE_APP_ID\n      const AppKey = process.env.VUE_APP_KEY\n      const GMTString = new Date().toGMTString()\n      const ShaObj = new JsSHA('SHA-1', 'TEXT')\n      ShaObj.setHMACKey(AppKey, 'TEXT')\n      ShaObj.update('x-date: ' + GMTString)\n      const HMAC = ShaObj.getHMAC('B64')\n      const Authorization = `hmac username=\"${AppID}\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"${HMAC}\"`\n      return { Authorization: Authorization, 'X-Date': GMTString }\n    },\n    // 取得指定站牌(item)公車路線資料\n    getCityBus () {\n      const urlData = `https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/${this.selectCity}?$format=JSON`\n      this.$http.get(urlData,\n        {\n          headers: this.apiID()\n        })\n        .then((res) => {\n          console.log('ok 指定縣市的公車', res.data)\n          this.road = res.data\n          this.selectRoad = ''\n        })\n        .catch(error => {\n          console.log('error 指定縣市的公車', error.response)\n        })\n    },\n    // 取得指定[縣市],[路線名稱]的公車預估到站資料<批次\n    getEstimated () {\n      this.destinationTitle = this.selectRoad.DestinationStopNameZh\n      this.departureTitle = this.selectRoad.DepartureStopNameZh\n      this.busDestination = []\n      this.busDeparture = []\n      const urlEstimated = `https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/${this.selectCity}/${this.selectRoad.RouteName.Zh_tw}?$format=JSON`\n      this.$http.get(urlEstimated,\n        {\n          headers: this.apiID()\n        })\n        .then((res) => {\n          // console.log('ok 預估到站', this.selectRoad.RouteName.Zh_tw, res.data)\n          res.data.forEach((direction) => {\n            if (direction.RouteName.Zh_tw === this.selectRoad.RouteName.Zh_tw) {\n              if (direction.Direction === 0) {\n                // 去程\n                this.busDestination.push(direction)\n                console.log('趣', this.busDestination)\n              } else if (direction.Direction === 1) {\n                this.busDeparture.push(direction)\n                console.log('回', this.busDeparture)\n              }\n            }\n          })\n        })\n        .catch(error => {\n          console.log('error 預估到站', error.response)\n        })\n    }\n  },\n  created () {\n    this.getCityBus()\n  }\n}\n</script>\n","import { render } from \"./RoadSearch.vue?vue&type=template&id=61d8ac62\"\nimport script from \"./RoadSearch.vue?vue&type=script&lang=js\"\nexport * from \"./RoadSearch.vue?vue&type=script&lang=js\"\n\nimport \"./RoadSearch.vue?vue&type=style&index=0&id=61d8ac62&lang=scss\"\n\nimport exportComponent from \"/Users/pine_yu/Documents/my project/bus/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}